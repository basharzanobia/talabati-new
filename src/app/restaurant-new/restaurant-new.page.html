
<ion-content [fullscreen]="true">

  <ion-refresher slot="fixed" [pullFactor]="0.5" [pullMin]="100" [pullMax]="200" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  
  <ion-row class="user-bar">
    <ion-col size="2" class="logo-head" routerLink="/tabs/tab1/1" routerDirection="root">       
      <img src="assets/img/logo.png">
</ion-col>
    <ion-col size="8" class="page-head">
      <ion-label class="rest-title">{{ (vendor$ | async)?.name }}</ion-label>   
    </ion-col>

    <ion-col size="2" class="page-head">
      <ion-buttons>  
        <ion-menu-button></ion-menu-button>   
      </ion-buttons>  
    </ion-col>
  </ion-row>


<div class="row gate-bar">
    <ion-slides [options]="catSlideOptsR">
      <ion-slide *ngFor="let category of categories$ | async as list">
          <button ion-button round color="light" class="scroll-click" (click)="selectedCategory = category.id">
            <ion-img [src]="AppConsts.appBaseUrl + '/' + category.imagePath" class="scroll-item selectable-icon"></ion-img>
            <ion-label class="rest-id">{{ category.name }}</ion-label>
          </button>
      </ion-slide>
    </ion-slides>

</div>

<section class="banner">

<div class="slide-prev" (click)="slidePrev()">
 

</div>
<div class="slide-next" (click)="slideNext()">

</div>
<ion-slides  paginationType="bullets" slidesPerView="1" pager="true" class="baner">
  <ion-slide  *ngFor="let vendorCover of (vendor$ | async)?.vendorCovers" class="banner-item">
<div class="img-container">
<ion-img [src]="AppConsts.appBaseUrl + '/' + vendorCover.imagePath" class="img-vendor"></ion-img>
</div>
   
  </ion-slide>
</ion-slides>

</section>


<section class="rest-info">
<ion-row>
  <ion-col size="12" class="res-location">
    <ion-icon name="location-outline" class="rest-map" color="primary"></ion-icon>
    <ion-label class="rest-address" color="tertiary">    {{ (vendor$ | async)?.region }}   </ion-label>
  </ion-col>

</ion-row>

<ion-row>
  
  <ion-col size="4" class="res-start" > 
    <ion-icon name="time-outline"></ion-icon>
      <ion-label color="secondry">
        {{ (vendor$ | async)?.startTime }} -{{ (vendor$ | async)?.endTime }} 
        
        </ion-label>  
      
  </ion-col>
  <ion-col size="4" class="res-start" > 
    <ion-icon class="stars"  (click)="addReview(1)" [ngClass]="{'checked' : rating >= 1}" name="star" ></ion-icon>
    <ion-icon class="stars"  (click)="addReview(2)" [ngClass]="{'checked' : rating >= 2}"  name="star" ></ion-icon>
    <ion-icon class="stars" (click)="addReview(3)" [ngClass]="{'checked' : rating >= 3}" name="star" ></ion-icon>
    <ion-icon class="stars" (click)="addReview(4)"  [ngClass]="{'checked' : rating >= 4}" name="star" ></ion-icon>
   <ion-icon class="stars"  (click)="addReview(5)"  [ngClass]="{'checked' : rating >= 5}" name="star" ></ion-icon>
      
  </ion-col>

  <ion-col size="2" class="prod-tilte-describ">
    <ion-label  *ngIf="isFav==false"  class="prod-price" (click)="createVendorWishList()">    
    
          <ion-icon name="heart"></ion-icon>
         
    </ion-label>
    <ion-label *ngIf="isFav==true"  class="prod-price" (click)="deleteVendorWishList()">    
   
        <ion-icon name="heart"  color="danger" ></ion-icon>
  
  </ion-label>
  </ion-col>
  <ion-col size="1" class="res-call">
    <a button icon-start ion-button full [href]="'tel://' + (vendor$ | async)?.phoneNumber">
      <ion-icon name="call-outline"  class="call-icon"></ion-icon>
    </a>
  </ion-col>
</ion-row>

</section>

<section class="products" >

<div *ngFor="let product of featuredProducts" class="container-row">
  <div class="container-box">
<div  class="container-right">
  <div  class="container-like">
   <ion-icon name="heart" class="isfavprod" style="color:red" *ngIf="dictionary.get(product.id) >0" (click)="deleteWishList(dictionary.get(product.id))" class="like-icon" ></ion-icon>
   <ion-icon name="heart" class="notfavprod"style="color:black"  *ngIf="dictionary.get(product.id) === undefined" class="like-icon" (click)="createWishList(product.id)" ></ion-icon>
    </div>
    <img [src]="AppConsts.appBaseUrl + '/' + product.mainImagePath" class="product-img" height="100"/>
</div>
<div class="container-middle">
  <ion-label class="item-id">{{ product.name }}  {{product.varient.varientId}}</ion-label>
</div>
<div  class="container-left">
  <div  class="container-price">
    <ion-label color="secondry" class="item-price">{{AppConsts.currency}} {{ product.price }} </ion-label> 
  </div>
  <div class="container-order">
 <ion-button size="small" fill="outline" shape="round" *ngIf="product.varient.length > 0"
  id="{{product.id}}" >عرض الخيارات</ion-button> 
 
 <div *ngIf="product.varient.length == 0" class="container-number">
  <ion-icon name="add-circle-outline" color="primary" (click)="incItem(product.id)"></ion-icon>
  {{  cart.getCountOfItem(product.id)  }}
  <ion-icon name="remove-circle-outline" color="primary" (click)="decItem(product.id)"></ion-icon>
 </div>
  </div>
</div>
  </div>
  <ion-modal  *ngIf="product.varient !== null"
  trigger="{{product.id}}"
  backdropDismiss="true"
  swipeToClose="true"
  [initialBreakpoint]="0.25" [breakpoints]="[0, 0.25, 0.5, 0.75]"
  class="varientsmodal"
  >
  <ng-template >
        <ion-header>الخيارات المتوفرة لـ       {{product.name}}  </ion-header>
        <ion-content >
          <ion-grid>
            <ion-row *ngFor="let varient of product?.varient" class="varient-con" >
              <ion-col size="3" *ngIf="varient.size !== null" class="varient-row ion-text-center" text-center>{{varient.size?.name}}   </ion-col>
              <ion-col size="3" *ngIf="varient.color !== null" class="varient-row ion-text-center" text-center>     {{varient.color?.name}} </ion-col>
              <ion-col size="2" class="varient-row ion-text-center" text-center>
                <small>   <span class="col2">  {{varient.price}}</span> {{AppConsts.currency}}  </small>
               </ion-col>
              <ion-col size="4"class="varient-row ion-text-center ion-no-padding" text-center >  
                <button class="varient-btn ion-text-wrap" (click)="addToCart(product.id,varient.id)">أضف إلى السلة</button>
                </ion-col>
             </ion-row>
          </ion-grid>
         
        </ion-content>
   
  </ng-template>
</ion-modal>
</div>


</section>


</ion-content>
<ion-footer class="footer">
  <ion-toolbar routerLink="/tabs/tab3" routerDirection="forward">
    <ion-title> مجموع السلة {{ this.cart.Total }} {{AppConsts.currency}}
      <ion-icon name="cart-outline"></ion-icon> 

    </ion-title>

  </ion-toolbar>
</ion-footer>