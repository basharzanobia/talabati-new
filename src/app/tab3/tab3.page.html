<ion-content [fullscreen]="true">
  <ion-row class="user-bar">
    <ion-col size="2" class="logo-head" routerLink="/tabs/tab1/1" routerDirection="root">
      <img src="assets/img/logo.png">
    </ion-col>
    <ion-col size="8" class="page-head" >
      <ion-label class="rest-title"> قائمة الطلبات</ion-label>   
    </ion-col>

    <ion-col size="2" class="page-head">
      <ion-buttons>
        <ion-menu-button></ion-menu-button>
      </ion-buttons>
    </ion-col>
  </ion-row>

    <ion-grid class="ion-margin table" *ngIf="items_len >0 " else nullOrder >
      <ion-row class="table-head"  >
        <ion-col>البيانات</ion-col>
        <ion-col>السعر</ion-col>
        <ion-col>الكمية</ion-col>
        <ion-col>ملاحظات</ion-col>
        
      </ion-row>
      <ion-row 
        *ngFor="let item of cart.Items; let i = index"
        class="table-count" >
        <ion-col> {{ item.product.name }} 
        <ng-container *ngIf="item.varientId!=null">
          <ng-container *ngIf="item.varient.colorId!=null">
            {{item.varient.color.name}}
          </ng-container>
          <ng-container *ngIf="item.varient.sizeId!=null">
          {{item.varient.size.name}}
        </ng-container>
      </ng-container>
    </ion-col>

        <ng-container *ngIf="item.varientId!=0;then content else other_content"></ng-container>
        <ng-template #content>
        <ion-col>{{ item.varient.price }}$</ion-col>
        </ng-template>
        <ng-template #other_content>
          <ion-col>{{ item.product.price }}$</ion-col>
          </ng-template>
        <ion-col>
          <ion-icon name="remove-circle-outline" color="danger" (click)="decItem(i)"></ion-icon>
          {{ item.quantity }}
          <ion-icon name="add-circle-outline" color="success" (click)="incItem(i)"></ion-icon>
        </ion-col>
        <ion-col>لا يوجد</ion-col>
       <ion-icon name="trash-outline" color="danger" (click)="removeItem(i)"></ion-icon>
      </ion-row>
      <ion-row class="order-cost" >
        <ion-col size="6">اجور التوصيل</ion-col>
        <ion-col size="6">00 </ion-col>
      </ion-row>

      <ion-row class="order-discount" >
        <ion-col size="6">العروض والخصومات</ion-col>
        <ion-col size="6">00 </ion-col>
      </ion-row>
  
      <ion-row class="order-total" >
        <ion-col size="6">الاجمالي</ion-col>
        <ion-col size="6">{{ cart.Total }}$  </ion-col>
      </ion-row>
  
      <ion-row class="order-addres" >
           <ion-col size="12">
            <ion-list>     
              <ion-item>
                <ion-select placeholder="عنوان التسليم" [(ngModel)]="AddressId" (ionChange)="selectAddress(AddressId)">
                  <ng-container *ngFor="let ad of userAddresses">
                    <ion-select-option value={{ad?.id}} >{{ad?.address}} / {{ad?.area}} / {{ad?.city}} /  {{ad?.houseNo}}</ion-select-option>
                   </ng-container>
                  <ion-select-option value="0">عنوان اخر</ion-select-option>
                </ion-select>
              </ion-item>
            </ion-list>
          </ion-col>


          <ion-grid class="sevices">
            <ion-row>
              <ion-col size="6">
                <ion-list lines="none">
                  <ion-item >
                    <ion-label class="booking-date" > المدينة</ion-label>
                  </ion-item>
                  <ion-item >
                    <ion-input type="txt" [(ngModel)]="userAddress.city" placeholder="city"></ion-input>
                  </ion-item>
                </ion-list>
              </ion-col>
              <ion-col size="6">
                <ion-list lines="none">
                  <ion-item >
                    <ion-label class="booking-time"> المنطقة </ion-label>
                  </ion-item>
                  <ion-item >
                    <ion-input type="text"  [(ngModel)]="userAddress.area"  placeholder="area"></ion-input>
                  </ion-item>
                </ion-list>
              </ion-col>
              <ion-col size="6">
                <ion-list lines="none">
                  <ion-item >
                    <ion-label class="booking-date"> العنوان</ion-label>
                  </ion-item>
                  <ion-item >
                    <ion-input type="text" [(ngModel)]="userAddress.address" placeholder="address"></ion-input>
                  </ion-item>
                </ion-list>
              </ion-col>
              <ion-col size="6">
                <ion-list lines="none">
                  <ion-item >
                    <ion-label class="booking-time">  رقم البناء </ion-label>
                  </ion-item>
                  <ion-item >
                    <ion-input type="text" [(ngModel)]="userAddress.houseNo" placeholder="000"></ion-input>
                  </ion-item>
                </ion-list>
              </ion-col>
               <!-- End Address Info-->       
            </ion-row>
          </ion-grid>



      </ion-row>
      <ion-row class="order-notes" >
        <ion-col size="12"> 
          <ion-label>ملاحظات</ion-label>
        </ion-col>
        <ion-col size="12"> 
          <ion-textarea type="text" 
            placeholder="ادخل ملاحظات الطلب من فضلك ..."
            [(ngModel)]="orderRequest.orderNotes"> </ion-textarea> 
          <br> <br>
           </ion-col>
      </ion-row>

      <ion-row class="order-notes" >
        <ion-col size="12"> 
          <ion-label>إرسال إلى شخص اخر</ion-label>
          <ion-checkbox (ionChange)="ShowDetailes($event)"></ion-checkbox>
        </ion-col>
      </ion-row>

      <ng-container *ngIf="showDetailes">
      <ion-row class="order-notes" >
        <ion-col size="12"> 
          <ion-label>الاسم</ion-label>
        </ion-col>
        <ion-col size="12"> 
          <ion-textarea type="text" 
            placeholder="ادخل الاسم الأوسط ..."
            [(ngModel)]="orderRequest.middleName"> </ion-textarea> 
          <br> <br>
           </ion-col>
      </ion-row>

      <ion-row class="order-notes" >
        <ion-col size="12"> 
          <ion-label>الاسم الأخير</ion-label>
        </ion-col>
        <ion-col size="12"> 
          <ion-textarea type="text" 
            placeholder="ادخل الاسم الأخير ..."
            [(ngModel)]="orderRequest.lastName"> </ion-textarea> 
          <br> <br>
           </ion-col>
      </ion-row>
    </ng-container>


      <ion-row class="order-pay" >
        <ion-col size="12" class="pay-title">
          <ion-label> طريقة الدفع</ion-label>
        </ion-col>
        <br> <br> 

        <ion-list style="width: 100%;">
          <ion-radio-group [(ngModel)]="orderRequest.paymentMode">
             <ion-item (click)="hidePaymentCompanies()">
              <ion-label> الدفع عبر المحفظة</ion-label>
              <ion-radio slot="end" value="1"></ion-radio>
             </ion-item>
             <ion-item (click)="hidePaymentCompanies()">
              <ion-label> الدفع عند الاستلام</ion-label>
              <ion-radio slot="end" value="2"></ion-radio>
             </ion-item>
             <ion-item (click)="showPaymentCompanies()">
              <ion-label> الدفع عبر البطاقة</ion-label>
              <ion-radio slot="end" value="3"></ion-radio>              
             </ion-item>
          </ion-radio-group>

          <ng-container *ngIf="paymentCompaniesVisible">
          <ion-list style="width: 80%;padding-right: 20%;">
            <ion-radio-group [(ngModel)]="orderRequest.paymentCompanyId">
              <ng-container *ngFor="let company of PaymentCompanies">
               <ion-item>
                <ion-img style="width: 30px;" size="3" src="https://talabak-b-y.com/{{ company.logo }}"></ion-img>
                <ion-col>{{ company.name }} </ion-col>
                <ion-col>{{ company.accountNumber }} </ion-col>
                <ion-radio slot="end" value="{{ company.id }}"></ion-radio>
               </ion-item>
              </ng-container>
            </ion-radio-group>
            <ion-input [(ngModel)]="orderRequest.paymentReferenceCode" type="text" placeholder="ادخل الرقم المرجعي لعملية التحويل   ..."> </ion-input> 
          </ion-list>
        </ng-container>


        </ion-list>

      
      </ion-row>
      <br>


      <ion-row class="order-add" >
        <ion-col size="6" class="order-cancel" (click)="clearCart()"> 
          <ion-icon name="trash-sharp"></ion-icon>
          <ion-label> حذف </ion-label>
        </ion-col>
        <ion-col size="6" class="item-order">
          <ion-button [expand]="'full'" class="order-button" (click)="sendOrder()">
            <ion-icon name="basket"></ion-icon>
            <ion-label class="add-item" > تاكيد الطلب  </ion-label>
          </ion-button>
        </ion-col>
      </ion-row>
      
      <br> <br>
    </ion-grid>


   
      <ion-grid class="ion-margin thanx" *ngIf="items_len ==0 " #nullOrder>
        <ion-row  >
          <ion-col size="12" class="thanx-head">
            <img src="assets/img/logo.png">
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12" class="thanx-title" >
            <ion-label >
              سلة المشتريات فارغة حالياً
            </ion-label>
          </ion-col>
        </ion-row>
        
        <ion-row>
          <ion-col size="12" class="thanx-text"> <p>
            يمكنك متابعة التسوق
          </p>
        </ion-col>
      
        </ion-row>
      
        <br>
        <ion-row class="order-add" >
             <ion-col size="12" class="main-button" routerLink="/intro"> 
              <a button icon-start ion-button full class="main-button">
                <ion-label class="add-item" > الرئيسية  </ion-label>
              </a>
               </ion-col>
        </ion-row>
      </ion-grid>

    

</ion-content>

